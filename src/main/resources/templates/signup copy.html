<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<title>User Registration</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
crossorigin=""/>
<link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />

<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
crossorigin=""></script>
<script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
<style>
  *{
    font-family: sans-serif;
  }
  body{
    background-image: url(background.jpg);
      background-size: cover;
      background-position: left;
      background-repeat: no-repeat;
      background-attachment: fixed;
      display: flex;
    
  }
  .container{
    border: none;
    max-width:750px;
    width: 100%;
    padding: 30px 30px ;
    border-radius:30px;
    margin-top: 20px;
    margin-left: auto; 
    margin-right: auto;
    background: beige;
    border-radius:30px;
    /* box-shadow: inset 0 0  25px rgba(0, 0, 0, 0.2); */
    align-items: center;
    /* justify-content: center;      */
  }
  .container form{
      max-width:500px;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      /* margin: 10px 0 12px 0;   */
  }
input[type="text"],
input[type="password"] , 
input[type="email"]{
  background: none;
    display: flex;
    border: 3px solid green;
    padding: 14px 10px;
    width: 100%;
    border-radius: 15px;
   /* margin:0px 15px 0 10px;*/
   margin-top: 8px;
   margin-left: 5px;
   margin-bottom: 17px;
    outline: none;
}
  button[type="submit"] {
    background-color: rgb(69, 138, 69);
    color: white;
    padding: 14px 20px;
    margin-bottom: 17px;
    margin-left: 175px;
    border: none;
    cursor: pointer;
    width: 200px;
    border-radius: 5px;
  }
button[type="submit"]:hover{
    background-color: green;
  }
/* label{
  font-size: 16px;
  margin-left: 0%;
} */

h3{
    color: rgb(8, 63, 12);
    align-self: center;
    font-size: larger;
    margin-bottom: 22px;
    display: block;
}
.pass_eye{
    margin-left: 30px;
    cursor: pointer;
}

a{
    color: rgb(100, 25, 25);
    
    padding: 0%;
    /* margin-left: 50px; */
  }
a:hover{
    color: rgb(58, 14, 14);
  }
  label{
    margin-left: 9px;
  }

  #link{
    white-space: initial;
  }
  #map{
        height: 400px;
        width: 100%;
  }
  /* header{
    background-image: url(logo.jpg);
    background-repeat: no-repeat;
    left: 0;
    top:0;
    background-size: auto;
  } */
</style>
</head>
<body>

  <div class="container">
    <h3>Create account</h3>
    <form class="signup_form" id="index" th:action="@{/signup}" method="POST" th:object="${user}" style="display: flex;">                            
        <div id="popup" style="display: none; border-style: solid; padding: 5px; margin: 10px; color: red; background-color: rgba(255, 0, 0, 0.221);">
            <p id="message" th:text="${message}" ></p>
        </div>
        <div class="form-groupe">
            <label for="f_name">First name</label>
            <input id="f_name" type="text" name="f_name" th:field="*{f_name}" placeholder="Enter your first name">
        </div>
        <div class="form-groupe">
            <label for="l_name">Last name</label>
            <input id="l_name" type="text" name="l_name" th:field="*{l_name}" placeholder="Enter your last name">
        </div>
        <div class="form-groupe">
            <label for="email">Email</label>
            <input id="email" type="email" name="email" th:field="*{email}" placeholder="Enter your email" >
        </div>
        <div class="form-groupe">
            <label for="phone">Phone number</label>
            <input id="phone" type="text" name="phone"  maxlength="10" th:field="*{phone}" placeholder="Enter your phone number">
        </div>
        <div class="form-groupe">
            <label for="password">Password</label>
            <input id="password" type="password" name="password" th:field="*{password}" placeholder="&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;">
            <i class="pass_eye" id="pass_eye_id" ></i>
        </div>
        <div class="form-groupe">
            <label for="password_confirm" class="password_conf">Password confirmation</label>
            <input id="password_confirm" type="password" name="password_confirm" placeholder="&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;">
            <i class="pass_eye" id="pass_eye_id" ></i>
        </div>

        <label for="map">Choose your agriculture zone</label>
        <div class="map" id="map">
          <input type="hidden" id="latitude" name="latitude" th:value="${latitude}">
          <input type="hidden" id="longitude" name="longitude" th:value="${longitude}">
        </div>

        <button id="submit-button" type="submit" onclick="passwordMatch()">Sign up</button><br>
        <label for="link">Already have an account ? <a href="/login" id="link">Sign in instead</a></label>

    </form>
    </div>

<script th:inline="javascript">
  var message = document.getElementById("message").textContent;
  if (message) {
     document.getElementById("popup").style.display = "block";
  }

  function passwordMatch(){
    var password1 = document.getElementById('password');
    var password2 = document.getElementById('password_confirm');
    var url = window.location.protocol + '//' + window.location.host;
    if((password1.value!=password2.value)){
      password2.setCustomValidity('Passwords dont match');
    }else {
      window.alert("Resgistration Successful ! Click Ok to go to your homepage");
      //window.history.pushState("", "", "user"); 
      //window.location.replace();
      //window.location.reload(true);
    }
  }
  const pass_eye_id = document.querySelector('#pass_eye_id');

  const password1 = document.querySelector('password');
  pass_eye_id.addEventListener('click',function(e){
    const type = password.getAttribute('type')==='password' ? 'text':'password';
    password.setAttribute('type',type);
    this.classList.toggle('pass_eye');
  });

  const password2 = document.querySelector('password_confirm');
  pass_eye_id.addEventListener('click',function(e){
    const type = password.getAttribute('type')==='password_confirm' ? 'text':'password_confirm';
    password.setAttribute('type',type);
    this.classList.toggle('pass_eye');
  });

  const map = L.map('map').setView([31.7917, -7.0926], 5);
    
    L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);
    //search box
    L.Control.geocoder().addTo(map);


    var longitue ; 
    var latitude ; 
    function onSubmitClick(){
      //password confirmation
      
    }
</script>

</body>
</html>